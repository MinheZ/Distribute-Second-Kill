<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.minhe.seckill.dao.StockOrderMapper">

<!--    新增库存订单，保存物品id，物品名称，用户电话号码-->
    <insert id="insertStockOrder">
        insert ignore into stock_order(id, name, user_phone)
        values (#{id}, #{name}, #{userPhone})
    </insert>

    <select id="queryByIdWithStock" resultType="com.minhe.seckill.pojo.StockOrder">
        select
        so.id,
        so.name,
        so.user_phone,
        s.id "stock.id",
#         s.name "stock.name",
        s.count "stock.count",
        s.sale "stock.sale",
        s.start_time "stock.start_time",
        s.end_time "stock.end_time",
        s.create_time "stock.create_time",
        s.version "stock.version"

        from stock_order so
        inner join stock s on so.id=s.id
        where so.id=#{id}
        and so.user_phone=#{userPhone}
    </select>
</mapper>